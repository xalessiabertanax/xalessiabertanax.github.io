<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BrandGen AI - Procedural Identity System</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Recursive:slnt,wght,CASL,CRSV,MONO@-15..0,300..1000,0..1,0..1,0..1&display=swap" rel="stylesheet">
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <style>
        /* --- 1. DESIGN SYSTEM VARIABLES --- */
        :root {
            --bg-deep: #050505;
            --bg-panel: #111111;
            --border: rgba(255, 255, 255, 0.1);
            --border-hover: rgba(255, 255, 255, 0.3);
            
            --text-main: #ffffff;
            --text-muted: #888888;
            
            --accent: #6366f1; /* Default accent, will be dynamic later */
            --ease: cubic-bezier(0.25, 1, 0.5, 1);
        }

        /* --- 2. GLOBAL RESET --- */
        body {
            margin: 0;
            background-color: var(--bg-deep);
            color: var(--text-main);
            font-family: 'Recursive', sans-serif;
            overflow: hidden; /* App-like feel */
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        button { font-family: 'Recursive', sans-serif; }

        /* --- 3. WIZARD STYLES (The Input Flow) --- */
        #wizard-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-deep);
            z-index: 100; /* On top of dashboard */
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.8s var(--ease), opacity 0.5s ease;
        }

        #wizard-container.hidden {
            transform: translateY(-100%);
            pointer-events: none;
        }

        .step-wrapper {
            width: 100%;
            max-width: 600px;
            padding: 40px;
            text-align: center;
            opacity: 0;
            display: none; /* Hidden by default */
            transform: translateY(20px);
            transition: all 0.5s var(--ease);
        }

        .step-wrapper.active {
            opacity: 1;
            display: block;
            transform: translateY(0);
        }

        h1.question {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 10px;
            letter-spacing: -1px;
            background: linear-gradient(to bottom, #fff, #888);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        p.hint { color: var(--text-muted); margin-bottom: 40px; font-variation-settings: 'CASL' 1; }

        /* The Big Input Field */
        input.hero-input {
            background: transparent;
            border: none;
            border-bottom: 2px solid var(--border);
            color: white;
            font-size: 3.5rem;
            text-align: center;
            width: 100%;
            font-weight: 700;
            font-family: 'Recursive';
            padding: 10px 0;
            outline: none;
            transition: border-color 0.3s;
        }
        input.hero-input:focus { border-color: var(--accent); }

        /* Selection Cards */
        .grid-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .option-card {
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--border);
            padding: 30px;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s var(--ease);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .option-card:hover {
            background: rgba(255,255,255,0.08);
            transform: translateY(-5px);
            border-color: var(--border-hover);
        }

        .option-card.selected {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.3);
        }

        .option-icon { font-size: 2rem; }
        .option-title { font-weight: 700; font-size: 1.1rem; }
        
        .nav-btn {
            background: white; color: black;
            border: none; padding: 18px 40px;
            border-radius: 50px; font-size: 1.1rem; font-weight: 800;
            cursor: pointer; margin-top: 40px;
            transition: transform 0.2s;
            box-shadow: 0 0 20px rgba(255,255,255,0.1);
        }
        .nav-btn:hover { transform: scale(1.05); }

        /* --- 4. DASHBOARD STYLES (The Result) --- */
        #dashboard-container {
            display: flex;
            height: 100%;
            width: 100%;
            opacity: 0; /* Starts hidden */
            transition: opacity 1s ease 0.5s;
        }
        #dashboard-container.visible { opacity: 1; }

        /* Sidebar */
        .sidebar {
            width: 320px;
            background: var(--bg-panel);
            border-right: 1px solid var(--border);
            padding: 30px;
            display: flex;
            flex-direction: column;
            gap: 25px;
            z-index: 10;
        }

        .sidebar-header {
            font-size: 0.8rem; color: var(--text-muted);
            text-transform: uppercase; letter-spacing: 1.5px;
            margin-bottom: 20px; border-bottom: 1px solid var(--border);
            padding-bottom: 20px;
        }

        /* Control Groups */
        .control-group {
            background: rgba(255,255,255,0.02);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 15px;
        }

        .control-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 10px; font-size: 0.9rem; font-weight: 600;
        }

        .lock-btn {
            background: transparent; border: 1px solid #444;
            color: #666; width: 28px; height: 28px;
            border-radius: 6px; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.2s;
        }
        .lock-btn.locked {
            background: var(--accent); border-color: var(--accent); color: white;
        }

        .meta-tag { font-size: 0.75rem; color: var(--text-muted); font-family: monospace; }

        .generate-btn {
            margin-top: auto;
            background: linear-gradient(135deg, var(--accent), #4f46e5);
            color: white; border: none; padding: 20px;
            border-radius: 12px; font-size: 1rem; font-weight: 700;
            cursor: pointer; box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            display: flex; align-items: center; justify-content: center; gap: 10px;
            transition: filter 0.2s;
        }
        .generate-btn:hover { filter: brightness(1.2); }

        /* Main Workspace */
        .workspace {
            flex: 1;
            background-image: radial-gradient(circle at center, #1a1a1a 0%, #000 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* The Brand Board Canvas */
        .brand-board {
            width: 800px;
            height: 600px;
            background: white;
            display: grid;
            grid-template-columns: 1fr 1fr; /* Split Left/Right */
            grid-template-rows: 2fr 1fr;    /* Split Top/Bottom */
            box-shadow: 0 50px 100px rgba(0,0,0,0.6);
            border-radius: 4px; /* Slight print feel */
            overflow: hidden;
            transition: transform 0.5s var(--ease);
        }

        /* Areas on the board */
        .area-logo {
            grid-column: 1 / 2; grid-row: 1 / 2;
            display: flex; justify-content: center; align-items: center;
            border-right: 1px solid rgba(0,0,0,0.1);
            position: relative;
        }
        
        .area-type {
            grid-column: 2 / 3; grid-row: 1 / 2;
            display: flex; flex-direction: column; justify-content: center;
            padding: 40px; text-align: left;
        }

        .area-pattern {
            grid-column: 1 / 3; grid-row: 2 / 3;
            background: #eee;
            position: relative;
            overflow: hidden;
            border-top: 1px solid rgba(0,0,0,0.1);
        }

        /* Typography on Board */
        #render-name { font-size: 3rem; line-height: 0.95; margin: 0; transition: all 0.5s; }
        #render-tagline { font-size: 0.9rem; margin-top: 15px; opacity: 0.6; font-family: monospace; }

        /* Export Bar */
        .top-bar {
            position: absolute; top: 20px; right: 20px;
            display: flex; gap: 10px;
        }
        .secondary-btn {
            background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);
            color: white; padding: 10px 20px; border-radius: 30px;
            cursor: pointer; font-size: 0.8rem; font-weight: 600;
        }
        .secondary-btn:hover { background: white; color: black; }

    </style>
</head>
<body>
    <div id="wizard-container">
    
    <div class="step-wrapper active" id="step-1">
        <p class="hint">Step 1 of 3</p>
        <h1 class="question">What are we building?</h1>
        <br>
        <input type="text" class="hero-input" id="inputName" placeholder="Brand Name" autocomplete="off" onkeydown="if(event.key === 'Enter') goToStep(2)">
        <button class="nav-btn" onclick="goToStep(2)">Next Step &rarr;</button>
    </div>

    <div class="step-wrapper" id="step-2">
        <p class="hint">Step 2 of 3</p>
        <h1 class="question">Choose the Industry.</h1>
        
        <div class="grid-options">
            <div class="option-card" onclick="selectArchetype('tech', this)">
                <i class="fa-solid fa-microchip option-icon"></i>
                <div class="option-title">Tech & SaaS</div>
            </div>
            <div class="option-card" onclick="selectArchetype('fashion', this)">
                <i class="fa-solid fa-gem option-icon"></i>
                <div class="option-title">Fashion & Luxury</div>
            </div>
            <div class="option-card" onclick="selectArchetype('craft', this)">
                <i class="fa-solid fa-leaf option-icon"></i>
                <div class="option-title">Organic & Craft</div>
            </div>
            <div class="option-card" onclick="selectArchetype('corporate', this)">
                <i class="fa-solid fa-building option-icon"></i>
                <div class="option-title">Finance & Trust</div>
            </div>
        </div>
    </div>

    <div class="step-wrapper" id="step-3">
        <p class="hint">Step 3 of 3</p>
        <h1 class="question">Define the Signal.</h1>
        
        <div class="grid-options">
            <div class="option-card" onclick="selectVibe('minimal', this)">
                <i class="fa-regular fa-circle option-icon"></i>
                <div class="option-title">Minimal & Quiet</div>
            </div>
            <div class="option-card" onclick="selectVibe('bold', this)">
                <i class="fa-solid fa-bolt option-icon"></i>
                <div class="option-title">Bold & Loud</div>
            </div>
            <div class="option-card" onclick="selectVibe('chaos', this)">
                <i class="fa-solid fa-shapes option-icon"></i>
                <div class="option-title">Disruptive & Raw</div>
            </div>
            <div class="option-card" onclick="selectVibe('friendly', this)">
                <i class="fa-solid fa-face-smile option-icon"></i>
                <div class="option-title">Friendly & Soft</div>
            </div>
        </div>
    </div>

</div>

<div id="dashboard-container">
    
    <div class="sidebar">
        <div class="sidebar-header">
            <i class="fa-solid fa-dna"></i> &nbsp; Procedural Engine V1
        </div>

        <div class="control-group">
            <div class="control-header">
                Logo Geometry 
                <button class="lock-btn" id="lock-logo" onclick="toggleLock('logo')"><i class="fa-solid fa-unlock"></i></button>
            </div>
            <div class="meta-tag" id="meta-logo">Generating...</div>
        </div>

        <div class="control-group">
            <div class="control-header">
                Typography 
                <button class="lock-btn" id="lock-type" onclick="toggleLock('type')"><i class="fa-solid fa-unlock"></i></button>
            </div>
            <div class="meta-tag" id="meta-type">Recursive Variable</div>
        </div>

        <div class="control-group">
            <div class="control-header">
                Color Palette 
                <button class="lock-btn" id="lock-color" onclick="toggleLock('color')"><i class="fa-solid fa-unlock"></i></button>
            </div>
            <div class="meta-tag" id="meta-color">Generating...</div>
        </div>

        <div class="control-group">
            <div class="control-header">
                Visual Pattern 
                <button class="lock-btn" id="lock-pattern" onclick="toggleLock('pattern')"><i class="fa-solid fa-unlock"></i></button>
            </div>
            <div class="meta-tag" id="meta-pattern">Generative Noise</div>
        </div>

        <button class="generate-btn" onclick="generateSystem()">
            <i class="fa-solid fa-dice"></i> Reroll Unlocked
        </button>
    </div>

    <div class="workspace">
        
        <div class="top-bar">
            <button class="secondary-btn" onclick="goToStep(1)">New Project</button>
            <button class="secondary-btn" style="background: white; color: black;">Export Assets (â‚¬149)</button>
        </div>

        <div class="brand-board" id="board">
            
            <div class="area-logo" id="bg-logo">
                <canvas id="logo-canvas" width="300" height="300"></canvas>
            </div>

            <div class="area-type" id="bg-type">
                <h2 id="render-name">BRAND</h2>
                <div id="render-tagline">Generated Identity System</div>
            </div>

            <div class="area-pattern" id="bg-pattern">
                <canvas id="pattern-canvas" width="800" height="200"></canvas>
            </div>

        </div>

        <div style="position: absolute; bottom: 20px; right: 20px; font-family: monospace; color: #444; font-size: 0.8rem;">
            SEED: <span id="seed-id">INIT</span>
        </div>

    </div>
</div>

<script>
    // --- 1. STATE MANAGEMENT ---
    let brandData = {
        name: "BRAND",
        archetype: "tech",  // Default
        vibe: "minimal"     // Default
    };

    let locks = {
        logo: false,
        type: false,
        color: false,
        pattern: false
    };

    let palette = {
        primary: '#fff',
        bg: '#000',
        accent: '#6366f1'
    };

    // --- 2. WIZARD NAVIGATION ---
    function goToStep(step) {
        // Save Name if leaving step 1
        if(step === 2) {
            const val = document.getElementById('inputName').value;
            if(val) brandData.name = val;
        }

        // UI Transition
        document.querySelectorAll('.step-wrapper').forEach(el => el.classList.remove('active'));
        
        if(step <= 3) {
            // Show next wizard step
            document.getElementById(`step-${step}`).classList.add('active');
        } else {
            // FINISHED: Transition to Dashboard
            finishWizard();
        }
    }

    function selectArchetype(type, el) {
        brandData.archetype = type;
        // Visual Selection
        document.querySelectorAll('#step-2 .option-card').forEach(c => c.classList.remove('selected'));
        el.classList.add('selected');
        
        // Auto-advance after 300ms
        setTimeout(() => goToStep(3), 300);
    }

    function selectVibe(vibe, el) {
        brandData.vibe = vibe;
        document.querySelectorAll('#step-3 .option-card').forEach(c => c.classList.remove('selected'));
        el.classList.add('selected');

        // Auto-advance to Dashboard
        setTimeout(() => goToStep(4), 300);
    }

    function finishWizard() {
        // Hide Wizard
        document.getElementById('wizard-container').classList.add('hidden');
        
        // Show Dashboard
        const dash = document.getElementById('dashboard-container');
        dash.classList.add('visible');
        
        // Run Initial Generation
        generateSystem();
    }

    // --- 3. THE PROCEDURAL ENGINE ---

    function generateSystem() {
        // Generate a random seed ID for the user to see
        document.getElementById('seed-id').innerText = Math.random().toString(36).substr(2, 9).toUpperCase();

        // Run sub-generators if not locked
        if(!locks.color) generateColors();
        if(!locks.logo) generateLogo();
        if(!locks.type) generateTypography();
        if(!locks.pattern) generatePattern();
        
        updateMetaTags();
    }

    function toggleLock(key) {
        locks[key] = !locks[key];
        const btn = document.getElementById(`lock-${key}`);
        
        if(locks[key]) {
            btn.classList.add('locked');
            btn.innerHTML = '<i class="fa-solid fa-lock"></i>';
        } else {
            btn.classList.remove('locked');
            btn.innerHTML = '<i class="fa-solid fa-unlock"></i>';
        }
    }

    // --- A. COLOR GENERATOR ---
    function generateColors() {
        let hue, sat, lig, bgLig;

        // Logic based on Archetype
        if(brandData.archetype === 'tech') {
            hue = Math.floor(Math.random() * 60) + 200; // Blues/Purples
            sat = 80; lig = 60; bgLig = 5;
        } else if(brandData.archetype === 'fashion') {
            hue = 45; // Gold/neutral
            sat = Math.random() * 20; // Low sat
            lig = 90; bgLig = 0; // Black BG
        } else if(brandData.archetype === 'craft') {
            hue = Math.floor(Math.random() * 60) + 20; // Earth tones
            sat = 40; lig = 70; bgLig = 95; // Light BG
        } else {
            hue = 210; // Corporate Blue
            sat = 60; lig = 50; bgLig = 98;
        }

        // Add randomness based on Vibe
        if(brandData.vibe === 'bold') { sat += 20; }
        if(brandData.vibe === 'minimal') { sat -= 30; }

        palette.primary = `hsl(${hue}, ${sat}%, ${lig}%)`;
        palette.accent = `hsl(${(hue+180)%360}, ${sat}%, 60%)`;
        palette.bg = `hsl(${hue}, 10%, ${bgLig}%)`;
        
        // Text Colors (Contrast check)
        const textCol = bgLig > 50 ? '#000' : '#fff';

        // Apply
        const board = document.getElementById('board');
        board.style.backgroundColor = palette.bg;
        board.style.color = textCol;

        // Update CSS Variable for accent
        document.documentElement.style.setProperty('--accent', palette.primary);
    }

    // --- B. LOGO GENERATOR (Canvas) ---
    function generateLogo() {
        const canvas = document.getElementById('logo-canvas');
        const ctx = canvas.getContext('2d');
        const w = canvas.width;
        const h = canvas.height;

        ctx.clearRect(0, 0, w, h);
        
        // Settings based on Archetype
        const isGeometric = (brandData.archetype === 'tech' || brandData.archetype === 'corporate');
        const complexity = isGeometric ? 4 : 6;
        
        ctx.strokeStyle = palette.primary;
        ctx.fillStyle = palette.primary;
        ctx.lineWidth = brandData.vibe === 'bold' ? 15 : 4;
        ctx.lineJoin = 'round';

        // Draw Shape
        ctx.beginPath();
        const cx = w/2; 
        const cy = h/2;

        for(let i=0; i<complexity; i++) {
            // Random points mirrored
            const x = cx + (Math.random() * 100 - 50);
            const y = cy + (Math.random() * 100 - 50);
            if(i===0) ctx.moveTo(x, y);
            else ctx.lineTo(x, y);
        }
        ctx.closePath();
        
        if(brandData.vibe === 'minimal') ctx.stroke();
        else {
            ctx.globalAlpha = 0.8;
            ctx.fill();
            ctx.globalAlpha = 1.0;
        }
    }

    // --- C. TYPOGRAPHY GENERATOR ---
    function generateTypography() {
        const nameEl = document.getElementById('render-name');
        const tagEl = document.getElementById('render-tagline');
        
        nameEl.innerText = brandData.name;
        nameEl.style.color = palette.primary;

        // Variable Font Settings
        let wght = 400, casl = 0, slnt = 0, mono = 0;

        if(brandData.archetype === 'tech') {
            wght = 600; mono = 1;
        } else if(brandData.archetype === 'fashion') {
            wght = 300; casl = 1; slnt = -10;
        } else if(brandData.archetype === 'craft') {
            wght = 500; casl = 1;
        } else {
            wght = 800; // Corporate
        }

        // Vibe Modifiers
        if(brandData.vibe === 'bold') wght += 200;
        if(brandData.vibe === 'minimal') wght = 300;

        nameEl.style.fontVariationSettings = `'wght' ${wght}, 'CASL' ${casl}, 'slnt' ${slnt}, 'MONO' ${mono}`;
    }

    // --- D. PATTERN GENERATOR ---
    function generatePattern() {
        const canvas = document.getElementById('pattern-canvas');
        const ctx = canvas.getContext('2d');
        ctx.clearRect(0,0, canvas.width, canvas.height);

        ctx.strokeStyle = palette.primary;
        ctx.globalAlpha = 0.2;

        const gap = brandData.vibe === 'minimal' ? 40 : 15;
        
        for(let x=0; x<canvas.width; x+=gap) {
            ctx.beginPath();
            if(brandData.archetype === 'craft') {
                // Circles
                ctx.arc(x, 100, Math.random()*20, 0, Math.PI*2);
            } else {
                // Lines
                ctx.moveTo(x, 0);
                ctx.lineTo(x + (Math.random()*20), 200);
            }
            ctx.stroke();
        }
        ctx.globalAlpha = 1.0;
    }

    function updateMetaTags() {
        document.getElementById('meta-logo').innerText = `${brandData.archetype.toUpperCase()} Geometry`;
        document.getElementById('meta-color').innerText = `HSL Generated`;
    }

</script>
</body>
</html>